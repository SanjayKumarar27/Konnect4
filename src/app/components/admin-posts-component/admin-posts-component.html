<div class="admin-posts-container">
  <!-- PREMIUM ANIMATED HEADER -->
  <header class="dashboard-header">
    <div class="header-content">
      <div class="title-wrapper">
        <h1 class="dashboard-title">
          <span class="title-text">Manage Posts</span>
        </h1>
      </div>
      <button class="btn-back-animated" (click)="goBack()">
        Back to Dashboard
      </button>
    </div>
  </header>
<!-- SPACING AFTER HEADER -->
  <div class="section-spacing"></div>

 <div class="search-wrapper">
  <div class="search-container">
    <!-- ICON WRAPPER -->
    <div class="search-icon-wrapper">
    </div>

    <!-- INPUT -->
    <input
      #searchInput
      type="text"
      [(ngModel)]="searchQuery"
      (ngModelChange)="onSearchInput($event)"
      class="search-input"
      id="search-input"
      autocomplete="off"
    />

    <!-- FLOATING LABEL -->
    <label 
      [class.floating]="hasSearchText"
      for="search-input" 
      class="search-label"
    >
      Search by content or author...
    </label>
  </div>
</div>
  <!-- SPACING AFTER SEARCH -->
  <div class="section-spacing"></div>

  <!-- LOADING -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading posts...</p>
  </div>

  <!-- POSTS GRID -->
  <div *ngIf="!loading && filteredPosts.length > 0" class="posts-grid">
    <div 
      *ngFor="let post of filteredPosts; let i = index" 
      class="post-card"
      [style.--delay]="i * 0.08 + 's'"
    >
       <div class="flex items-center mb-2 ">
        <img class="w-10 h-10 rounded-full border border-indigo-300"
             src="https://ui-avatars.com/api/?name={{post.username}}" [routerLink]="['/profile',post.userId]" />
        <div>
          <div class="font-semibold text-gray-800">
            {{ post.username ?? 'Anonymous' }}
          </div>
          <div class="text-xs text-gray-400">
            {{ post.createdAt | date:'medium' }}
          </div>
        </div>  
      </div>


      <div class="post-content">
      {{ (post.content | slice:0:100) + (post.content.length > 100 ? '...' : '') }}
      </div>
       <img *ngIf="post.imageUrl" 
         [src]="post.imageUrl" 
         class="mt-3 rounded-xl w-full max-h-80 object-contain shadow-sm" />

        <div class="stats">
          <span class="stat-item">Likes {{ post.likesCount }}</span>
          <span class="stat-item">Comments {{ post.commentsCount }}</span>
        </div>

        <div class="actions">
          <button class="btn btn-view" (click)="selectPost(post)">View Details</button>
          <button class="btn btn-delete" (click)="deletePost(post)">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- EMPTY -->
  <div *ngIf="!loading && filteredPosts.length === 0" class="empty-state">
    <div class="empty-icon">Empty</div>
    <p>No posts found</p>
  </div>

  <!-- MODAL -->
  <div *ngIf="showPostDetail && selectedPost" class="modal-backdrop" (click)="closeDetail()">
    <div class="modal" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeDetail()">Close</button>
      <div class="modal-header">
        <h2>Post by @{{ selectedPost.username }}</h2>
        <p class="date">{{ selectedPost.createdAt | date: 'medium' }}</p>
      </div>
      <div class="modal-body">
        <p>{{ selectedPost.content }}</p>
      </div>
      <div class="modal-stats">
        <div class="stat">
          <span class="value">{{ selectedPost.likesCount }}</span>
          <span class="label">Likes</span>
        </div>
        <div class="stat">
          <span class="value">{{ selectedPost.commentsCount }}</span>
          <span class="label">Comments</span>
        </div>
      </div>
      <button class="btn btn-danger btn-delete-full" (click)="deletePost(selectedPost)">
        Delete This Post
      </button>
    </div>
  </div>
