<aside [ngClass]="open ? 'w-64' : 'w-16'" 
       class="bg-white border-r border-gray-200 min-h-screen shadow-lg transition-all duration-500 flex flex-col fixed top-20 left-0 z-50">

  <!-- Header with toggle button -->
  <div class="flex items-center justify-end p-3 border-b border-gray-200">
    <button class="p-2 rounded-full hover:bg-indigo-600 hover:text-white transition-colors duration-300 shadow"
            (click)="toggle()">
      <i class="fa" [ngClass]="open ? 'fa-chevron-left' : 'fa-chevron-right'"></i>
    </button>
  </div>

  <!-- Navigation -->
  <nav class="flex-1 flex flex-col mt-6 gap-3 overflow-y-auto">

    <!-- ========================================
         USER NAVIGATION (for both users and admins)
         ======================================== -->
    <ng-container *ngIf="!isAdmin()">
      <ng-container *ngFor="let item of [
        {icon:'fa-home', label:'Home', action: goHome},
        {icon:'fa-plus-circle', label:'Create Post', action: goCreatePost},
        {icon:'fa-comments', label:'Messages', action: goMessages},
        {icon:'fa-compass', label:'Explore', action: goExplore},
        {icon:'fa-sign-out-alt', label:'Logout', action: logout}
      ]">
        <button class="group relative flex items-center w-full px-4 py-3 rounded-lg 
                       transition-all duration-300 hover:bg-gradient-to-r hover:from-indigo-500 hover:via-purple-500 hover:to-indigo-500 text-gray-600 shadow"
                (click)="item.action()">
          
          <i class="fa {{item.icon}} text-lg transition-transform duration-300 group-hover:scale-125 group-hover:text-white"></i>

          <span *ngIf="open" 
                class="ml-4 font-medium text-gray-700 group-hover:text-white transition-all duration-300">
            {{item.label}}
          </span>

          <span *ngIf="!open"
                class="absolute left-full top-1/2 -translate-y-1/2 ml-2 bg-indigo-600 text-white text-xs font-medium rounded px-2 py-1 shadow-lg 
                       opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300 whitespace-nowrap">
            {{item.label}}
          </span>
        </button>
      </ng-container>
    </ng-container>

    <!-- ========================================
         ADMIN NAVIGATION (only for admins)
         ======================================== -->
    <ng-container *ngIf="isAdmin()">
      <!-- Admin Section Header -->
      <div *ngIf="open" class="px-4 py-2 mt-2 text-xs font-bold text-indigo-600 uppercase tracking-wider">
        üîê Admin Panel
      </div>

      <!-- Admin Menu Items -->
      <ng-container *ngFor="let item of [
        {icon:'fa-chart-line', label:'Dashboard', action: goAdminDashboard},
        {icon:'fa-users', label:'Manage Users', action: goAdminUsers},
        {icon:'fa-file-alt', label:'Manage Posts', action: goAdminPosts},
        {icon:'fa-sign-out-alt', label:'Logout', action: logout}
      ]">
        <button class="group relative flex items-center w-full px-4 py-3 rounded-lg 
                       transition-all duration-300 hover:bg-gradient-to-r hover:from-red-500 hover:via-orange-500 hover:to-red-500 text-gray-600 shadow"
                (click)="item.action()">
          
          <i class="fa {{item.icon}} text-lg transition-transform duration-300 group-hover:scale-125 group-hover:text-white"></i>

          <span *ngIf="open" 
                class="ml-4 font-medium text-gray-700 group-hover:text-white transition-all duration-300">
            {{item.label}}
          </span>

          <span *ngIf="!open"
                class="absolute left-full top-1/2 -translate-y-1/2 ml-2 bg-red-600 text-white text-xs font-medium rounded px-2 py-1 shadow-lg 
                       opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300 whitespace-nowrap">
            {{item.label}}
          </span>
        </button>
      </ng-container>

      <!-- User Profile Quick Access -->
      <div class="mt-4 pt-4 border-t border-gray-200">
        <span *ngIf="open" class="px-4 py-2 text-xs font-bold text-gray-400 uppercase tracking-wider block">
          Quick Links
        </span>
        <button class="group relative flex items-center w-full px-4 py-3 rounded-lg 
                       transition-all duration-300 hover:bg-gradient-to-r hover:from-indigo-500 hover:via-purple-500 hover:to-indigo-500 text-gray-600 shadow"
                (click)="goHome()">
          <i class="fa fa-home text-lg transition-transform duration-300 group-hover:scale-125 group-hover:text-white"></i>
          <span *ngIf="open" 
                class="ml-4 font-medium text-gray-700 group-hover:text-white transition-all duration-300">
            View as User
          </span>
          <span *ngIf="!open"
                class="absolute left-full top-1/2 -translate-y-1/2 ml-2 bg-indigo-600 text-white text-xs font-medium rounded px-2 py-1 shadow-lg 
                       opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0 transition-all duration-300 whitespace-nowrap">
            View as User
          </span>
        </button>
      </div>
    </ng-container>

  </nav>

</aside>